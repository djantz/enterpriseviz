<!-- Licensed under GPLv3 - See LICENSE file for details. -->
<calcite-dialog id="email-modal" modal heading="Configure Email Settings" scale="m" open
                {% if form.errors %}kind="danger"{% endif %}>

  <div id="email-form-container">
    {% include "partials/portal_email_form.html" %}
  </div>

{#  <calcite-button id="email-portal-delete" slot="footer-start" appearance="solid"#}
{#                  kind="danger" icon-start="trash"#}
{#                  {% if not description %}disabled{% endif %}#}
{#                  hx-delete="{% url 'enterpriseviz:email_settings' %}"#}
{#                  hx-target="#email-site-form" hx-include="#email-site-form"#}
{#                  label="Delete existing configuration">#}
{#    Delete#}
{#  </calcite-button>#}
  <calcite-button id="email-portal-delete" slot="footer-start" appearance="solid" kind="danger"
                  icon-start="trash"
                  {% if not description %}disabled{% endif %}
                  data-confirm-delete
                  data-delete-url="{% url 'enterpriseviz:email_settings' %}"
                  data-delete-method="DELETE"
                  data-delete-target="#email-form-container"
                  data-delete-message="Are you sure you want to delete this email configuration?"
                  data-delete-details="This will stop sending email notifications."
                  data-delete-button="Delete Configuration"
                  label="Delete email configuration permanently">
    Delete
  </calcite-button>

  <calcite-button id="email-portal-cancel" data-action="close-modal" slot="footer-end"
                  appearance="outline" icon-start="circle-disallowed"
                  label="Cancel without saving changes">
    Cancel
  </calcite-button>

  <calcite-button type="submit" id="email-portal-save" slot="footer-end"
                  hx-post="{% url 'enterpriseviz:email_settings' %}"
                  hx-target="#email-site-form" hx-swap="innerHTML"
                  hx-include="#email-site-form" hx-vals='{"action": "save"}'
                  icon-start="save" label="Save email configuration">">
    Register
  </calcite-button>

</calcite-dialog>
