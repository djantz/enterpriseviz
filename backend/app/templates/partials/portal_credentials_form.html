<!-- Licensed under GPLv3 - See LICENSE file for details. -->
<form id="credentials-portal-form" class="calcite-form" autocomplete="off"
  {% if "users" in items or "webmaps" in items or "webapps" in items or "services" in items %}
      hx-post="{% url 'enterpriseviz:refresh_portal' %}" hx-target="closest #progress-container"
      hx-swap="innerHTML"
      {% elif items == "metadata" %}hx-post="{% url 'enterpriseviz:metadata' instance=instance %}"
      hx-push-url="{% url 'enterpriseviz:metadata' instance=instance %}" hx-target="#mainbodycontent"
      hx-swap="show:window:top"
      {% elif items == "unused" %}hx-post="{% url 'enterpriseviz:unused' instance=instance %}"
      hx-push-url="{% url 'enterpriseviz:unused' instance=instance %}" hx-target="#mainbodycontent"
      hx-swap="show:window:top"
      {% elif items == "duplicates" %}hx-post="{% url 'enterpriseviz:duplicate' instance=instance %}"
      hx-push-url="{% url 'enterpriseviz:duplicates' instance=instance %}" hx-target="#mainbodycontent"
      hx-swap="show:window:top"
  {% endif %}
>
  {% csrf_token %}
  <calcite-input type="text" id="url" name="url"
                 placeholder="{{ instance.url }}" read-only
                 autocomplete="off" value=""
                 label-text="Portal"></calcite-input>

  <calcite-input icon="user" id="username" name="username"
                 placeholder="Portal admin username"
                 required type="text" value=""
                 autocomplete="off"
                 label-text="Username"
                 status="{% if form.username.errors %}invalid{% else %}idle{% endif %}"
                 validation-message="{{ form.username.errors|join:' ' }}"
                 validation-icon="{% if form.username.errors %}exclamation-mark-triangle{% endif %}">
    <calcite-icon slot="label-content" id="username-tooltip" icon="information" scale="s"></calcite-icon>
  </calcite-input>

  <calcite-input id="password" name="password"
                 placeholder="Password" required
                 type="password" value="" autocomplete="off"
                 label-text="Password"
                 status="{% if form.password.errors %}invalid{% else %}idle{% endif %}"
                 validation-message="{{ form.password.errors|join:' ' }}"
                 validation-icon="{% if form.password.errors %}exclamation-mark-triangle{% endif %}"></calcite-input>

  <input type="hidden" name="instance" value="{{ instance.alias }}">
  <input type="hidden" name="items" value="{{ items }}">
  <input type="hidden" name="full_refresh" value="{{ full_refresh }}">
</form>

<calcite-tooltip reference-element="username-tooltip" placement="bottom-start">
  <span>An admin user to the Portal that can view all items</span>
</calcite-tooltip>
