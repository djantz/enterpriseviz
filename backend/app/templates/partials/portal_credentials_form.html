<!-- Licensed under GPLv3 - See LICENSE file for details. -->
<form id="credentials-portal-form" class="calcite-form" autocomplete="off"
  {% if "users" in items or "webmaps" in items or "webapps" in items or "services" in items %}
      hx-post="{% url 'enterpriseviz:refresh_portal' %}" hx-target="closest #progress-container"
      hx-swap="innerHTML"
      {% elif items == "metadata" %}hx-post="{% url 'enterpriseviz:metadata' instance=instance %}"
      hx-push-url="{% url 'enterpriseviz:metadata' instance=instance %}" hx-target="#mainbodycontent"
      hx-swap="show:window:top"
      {% elif items == "unused" %}hx-post="{% url 'enterpriseviz:unused' instance=instance %}"
      hx-push-url="{% url 'enterpriseviz:unused' instance=instance %}" hx-target="#mainbodycontent"
      hx-swap="show:window:top"
      {% elif items == "duplicates" %}hx-post="{% url 'enterpriseviz:duplicate' instance=instance %}"
      hx-push-url="{% url 'enterpriseviz:duplicates' instance=instance %}" hx-target="#mainbodycontent"
      hx-swap="show:window:top"
  {% endif %}
>
  {% csrf_token %}
  <calcite-input type="text" id="url" name="url"
                 placeholder="{{ instance.url }}" read-only="true"
                 autocomplete="off" value="" label-text="Portal"></calcite-input>

  <calcite-input icon="user" id="username" name="username"
                 placeholder="Portal admin username"
                 required type="text" value=""
                 autocomplete="off" label-text="Username">
    <calcite-icon slot="label-content" id="username-tooltip" icon="information" scale="s"></calcite-icon>
  </calcite-input>
  <calcite-input-message {% if not form.username.errors %}hidden{% endif %} icon="exclamation-mark-triangle-f"
                         status="invalid">
    {{ form.username.errors|join:" " }}
  </calcite-input-message>

  <calcite-input icon id="password" name="password"
                 placeholder="Password" required
                 type="password" value="" autocomplete="off" label-text="Password"></calcite-input>
  <calcite-input-message {% if not form.password.errors %}hidden{% endif %} icon="exclamation-mark-triangle-f"
                         status="invalid">
    {{ form.password.errors|join:" " }}
  </calcite-input-message>
  <input type="hidden" name="instance" value="{{ instance.alias }}">
  <input type="hidden" name="items" value="{{ items }}">
  <input type="hidden" name="delete" value="{{ delete_flag }}">
</form>
<calcite-tooltip reference-element="username-tooltip" close-on-click placement="bottom-start">
  <span>An admin user to the Portal that can view all items</span>
</calcite-tooltip>
