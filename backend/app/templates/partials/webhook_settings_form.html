<!-- Licensed under GPLv3 - See LICENSE file for details. -->
{% load filter %}
<form id="webhook-site-form" class="calcite-form" autocomplete="off">
  {% csrf_token %}

  <calcite-label>
    Webhook Secret
    <calcite-input type="text" id="{{ form.webhook_secret.name }}" name="{{ form.webhook_secret.name }}"
                   autocomplete="off" value="{{ form.webhook_secret.value|default_if_none:"" }}"
                   placeholder="Enter a secure secret key">
      <calcite-button slot="action" id="copy-secret-btn" icon-start="copy-to-clipboard"
                      title="Copy secret to clipboard">
      </calcite-button>
    </calcite-input>
    <calcite-input-message {% if not form.webhook_secret.errors %}hidden{% endif %} icon="exclamation-mark-triangle-f"
                           status="invalid">
      {{ form.webhook_secret.errors|join:" " }}
    </calcite-input-message>
  </calcite-label>

  <calcite-notice open>
    <div slot="title">Security Information</div>
    <div slot="message">
      This secret is used to validate webhook requests from ArcGIS Portal.
      Configure the same secret in your Portal's webhook settings.
      Use a strong, randomly generated value (minimum 16 characters).
    </div>
    <calcite-action slot="actions-end" icon="refresh" text="Generate" text-enabled id="generate-secret-action">
    </calcite-action>
  </calcite-notice>

</form>
